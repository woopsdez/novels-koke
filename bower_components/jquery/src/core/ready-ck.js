define(["../core","../core/init","../deferred"],function(e){function n(){document.removeEventListener("DOMContentLoaded",n,!1);window.removeEventListener("load",n,!1);e.ready()}var t;e.fn.ready=function(t){e.ready.promise().done(t);return this};e.extend({isReady:!1,readyWait:1,holdReady:function(t){t?e.readyWait++:e.ready(!0)},ready:function(n){if(n===!0?--e.readyWait:e.isReady)return;e.isReady=!0;if(n!==!0&&--e.readyWait>0)return;t.resolveWith(document,[e]);if(e.fn.triggerHandler){e(document).triggerHandler("ready");e(document).off("ready")}}});e.ready.promise=function(r){if(!t){t=e.Deferred();if(document.readyState==="complete")setTimeout(e.ready);else{document.addEventListener("DOMContentLoaded",n,!1);window.addEventListener("load",n,!1)}}return t.promise(r)};e.ready.promise()});